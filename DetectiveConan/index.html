<!DOCTYPE html><html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conan Database - Season 1 (Detailed Edition)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Kanit -->
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    sans: ['Kanit', 'sans-serif'],
                },
                colors: {
                    conan: {
                        blue: '#1e3a8a',
                        red: '#dc2626',
                        bg: '#f8fafc',
                        brick: '#7f1d1d'
                    }
                }
            }
        }
    }
</script>
<style>
    body {
        background-color: #f8fafc;
        background-image: radial-gradient(#cbd5e1 1px, transparent 1px);
        background-size: 24px 24px;
    }
    .brick-pattern {
        background-color: #7f1d1d;
        background-image:   
            linear-gradient(335deg, rgba(255,255,255,0.05) 23px, transparent 23px),
            linear-gradient(155deg, rgba(255,255,255,0.05) 23px, transparent 23px);
        background-size: 58px 58px;
    }
    .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }
    .spoiler-content {
        filter: blur(8px);
        user-select: none;
        transition: all 0.3s ease;
    }
    .spoiler-active .spoiler-content {
        filter: none;
        user-select: text;
    }
    .spoiler-overlay {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255,255,255,0.6);
        z-index: 10;
        cursor: pointer;
        color: #dc2626;
        font-weight: bold;
    }
    .spoiler-active .spoiler-overlay { display: none; }
      
    /* Modal Animation */
    .modal { opacity: 0; visibility: hidden; transition: all 0.3s ease; }
    .modal.active { opacity: 1; visibility: visible; }
    .modal-content { transform: scale(0.95); transition: all 0.3s ease; }
    .modal.active .modal-content { transform: scale(1); }
</style>

</head>
<body class="font-sans text-slate-800"><!-- Navbar -->
<nav class="bg-conan-blue text-white sticky top-0 z-40 shadow-lg border-b-4 border-conan-red">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-conan-red rounded-full flex items-center justify-center font-bold text-white border-2 border-white">C</div>
                <span class="font-bold text-xl tracking-wide">ConanDB <span class="text-sm font-light opacity-80">Season 1</span></span>
            </div>
            <!-- Filters -->
            <div class="hidden md:flex space-x-2">
                <button onclick="filterEpisodes('all')" class="bg-blue-900 hover:bg-blue-700 px-3 py-1 rounded text-xs">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                <button onclick="filterEpisodes('manga')" class="hover:bg-blue-700 px-3 py-1 rounded text-xs">Canon (‡∏°‡∏±‡∏á‡∏á‡∏∞)</button>
                <button onclick="filterEpisodes('original')" class="hover:bg-blue-700 px-3 py-1 rounded text-xs">TV Original</button>
            </div>
        </div>
    </div>
</nav>

<!-- Main Grid -->
<main class="max-w-7xl mx-auto px-4 py-8">
    <div class="mb-6 flex flex-col md:flex-row gap-4 justify-between items-center">
        <h1 class="text-2xl font-bold text-slate-800 border-l-4 border-conan-red pl-3">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ô (EP 1 - 42)</h1>
        <div class="relative w-full md:w-64">
            <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ô..." class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:border-conan-blue focus:ring-1 focus:ring-conan-blue shadow-sm">
            <i class="fa-solid fa-magnifying-glass absolute left-4 top-3 text-gray-400"></i>
        </div>
    </div>

    <div id="episodeGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
        <!-- JS Injects Cards Here -->
    </div>
</main>

<!-- Full Detail Modal (The V1 Design) -->
<div id="detailModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-0 md:p-4 overflow-y-auto">
    <div class="modal-content bg-white w-full max-w-5xl rounded-xl shadow-2xl relative min-h-[90vh] md:h-auto flex flex-col overflow-hidden">
          
        <!-- Close Button -->
        <button onclick="closeModal()" class="fixed top-4 right-4 z-50 w-10 h-10 bg-slate-800 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition shadow-lg border-2 border-white">
            <i class="fa-solid fa-xmark text-xl"></i>
        </button>

        <!-- Modal Content Body (Scrollable) -->
        <div id="modalBody" class="overflow-y-auto h-full max-h-[90vh]">
            <!-- Content injected via JS -->
        </div>
    </div>
</div>

<!-- DATA & SCRIPT -->
<script>
    // ---------------------------------------------------------
    // üìÇ DATABASE: SEASON 1 (EP 1-42 FULL DETAILED / best-effort)
    // Data compiled from: detectiveconan.fandom.com (episode list), detectiveconanworld.com (season summary), en.wikipedia.org (Season 1 page), conanth.com (Thai episode list)
    // ---------------------------------------------------------
    const episodes = [
        // --------------
        // Season 1 ‚Äî Schema-only skeleton (EP 1‚Äì42)
        // Each object contains the full field names but values are left empty ("", null, or empty array)
        // Fill values later as needed ‚Äî no '-' placeholders are used per your request.
        // --------------
        { id: 1, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 2, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 3, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 4, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 5, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 6, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 7, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 8, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 9, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 10, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 11, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 12, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 13, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 14, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 15, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 16, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 17, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 18, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 19, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 20, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 21, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 22, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 23, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 24, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 25, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 26, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 27, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 28, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 29, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 30, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 31, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 32, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 33, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 34, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 35, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 36, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 37, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 38, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 39, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 40, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 41, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" },
        { id: 42, titleTH: "", titleJP: "", titleEN: "", date: "", season: "Season 1", duration: "", type: "", source: "", mangaRef: "", caseType: "", numberOfCases: null, caseSubType: "", motive: "", complexity: null, location: "", scene: "", time: "", environment: "", victim: "", culprit: "", suspects: [], keyCharacters: [], newAppearance: "", clues: [], trick: "", mistake: "", howSolved: "", frontUsed: "", plotResult: "", mainPlot: "", tiesToBlackOrg: "", characterDevelopment: "", longTermClues: "", relatedEpisodes: "", trivia: "" }
    ];

    // ---------------------------------------------------------
    // üîß APP LOGIC (unchanged, but adapted to new keys)
    // ---------------------------------------------------------
      
    const grid = document.getElementById('episodeGrid');
    const modal = document.getElementById('detailModal');
    const modalBody = document.getElementById('modalBody');
    const searchInput = document.getElementById('searchInput');

    // Initial Render
    renderEpisodes(episodes);

    // Filter Function
    function filterEpisodes(filter) {
        let filtered = episodes;
        if (filter === 'manga') filtered = episodes.filter(e => e.type === 'manga');
        if (filter === 'original') filtered = episodes.filter(e => e.type === 'original');
        renderEpisodes(filtered);
    }

    // Search Function
    searchInput.addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        const filtered = episodes.filter(ep =>   
            (ep.titleTH && ep.titleTH.toLowerCase().includes(term)) ||   
            (ep.titleEN && ep.titleEN.toLowerCase().includes(term)) ||
            ep.id.toString().includes(term) ||
            (ep.titleJP && ep.titleJP.toLowerCase().includes(term))
        );
        renderEpisodes(filtered);
    });

    // Render Cards (Grid View)
    function renderEpisodes(data) {
        grid.innerHTML = '';
        data.forEach(ep => {
            const isManga = ep.type === 'manga';
            const isBlackOrg = (ep.tags || []).includes('blackorg');
              
            const card = document.createElement('div');
            card.className = 'bg-white rounded-lg shadow-sm overflow-hidden border border-slate-200 card-hover cursor-pointer relative';
            card.onclick = () => openDetail(ep.id);
              
            // top color bar (fallbacks for dynamic classes)
            const topColor = isBlackOrg ? 'black' : (isManga ? 'conan-blue' : 'conan-red');
            
            card.innerHTML = `
                <div class="h-2" style="background-color: ${isBlackOrg ? '#000' : (isManga ? '#1e3a8a' : '#dc2626')}"></div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-bold px-2 py-1 rounded bg-slate-100 text-slate-600">EP ${ep.id}</span>
                        <div class="flex gap-1">
                            ${isBlackOrg ? '<span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black text-white">BO</span>' : ''}
                            <span class="text-[10px] font-bold px-1.5 py-0.5 rounded ${isManga ? 'bg-green-100 text-green-700' : 'bg-orange-100 text-orange-700'}">${isManga ? 'Manga' : 'Original'}</span>
                        </div>
                    </div>
                    <h3 class="font-bold text-slate-800 text-lg leading-tight mb-1 truncate">${ep.titleTH || ep.titleEN || ep.titleJP}</h3>
                    <p class="text-xs text-slate-500 mb-3 truncate">${ep.titleEN || ep.titleJP || }</p>
                      
                    <div class="flex justify-between items-center text-xs text-slate-400 mt-2 pt-2 border-t border-slate-100">
                        <span><i class="fa-regular fa-calendar mr-1"></i>${ep.date}</span>
                        <span>${ep.source || }</span>
                    </div>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // Open Modal (The Detail View V1 Style)
    function openDetail(id) {
        const ep = episodes.find(e => e.id === id);
        if(!ep) return;
          
        // Generate Star Rating
        let stars = '';
        if(ep.complexity && typeof ep.complexity === 'number') {
            for(let i=1; i<=5; i++) {
                stars += i <= ep.complexity ? '<i class="fa-solid fa-star"></i>' : '<i class="fa-regular fa-star"></i>';
            }
        } else {
            stars = '<span class="text-gray-300">-</span>';
        }

        // For arrays display
        const renderList = (arr) => Array.isArray(arr) ? arr.map(x=>`<span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-[10px] border border-blue-100 mr-1 inline-block">${x}</span>`).join('') : (arr || );

        // HTML Structure (Injected into Modal)
        modalBody.innerHTML = `
            <div class="bg-white">
                <!-- Header -->
                <div class="p-6 md:p-8 border-l-8 ${ (ep.tags || []).includes('blackorg') ? 'border-black' : 'border-conan-blue'} bg-slate-50">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4">
                        <span class="bg-slate-800 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider mb-2 md:mb-0">
                            Episode ${ep.id}
                        </span>
                        <div class="flex gap-2">
                            <span class="bg-${ep.type === 'manga' ? 'green' : 'orange'}-100 text-${ep.type === 'manga' ? 'green' : 'orange'}-800 text-xs font-semibold px-2.5 py-0.5 rounded border border-${ep.type === 'manga' ? 'green' : 'orange'}-400">
                                ${ep.type === 'manga' ? 'Manga Adapted' : 'Anime Original'}
                            </span>
                            ${(ep.tags || []).includes('blackorg') ? '<span class="bg-black text-white text-xs font-semibold px-2.5 py-0.5 rounded">Black Org</span>' : ''}
                        </div>
                    </div>
                      
                    <h1 class="text-2xl md:text-4xl font-bold text-slate-900 mb-2">${ep.titleTH || ep.titleEN || ep.titleJP}</h1>
                    <h2 class="text-lg text-slate-500 mb-1">${ep.titleJP || ''}</h2>
                    <p class="text-sm text-slate-400 italic">${ep.titleEN || ''}</p>

                    <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm border-t border-slate-200 pt-4">
                        <div><p class="text-gray-500 text-xs">‡∏≠‡∏≠‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</p><p class="font-medium">${ep.date}</p></div>
                        <div><p class="text-gray-500 text-xs">‡∏ã‡∏µ‡∏ã‡∏±‡∏ô</p><p class="font-medium">${ep.season || 'Season 1'}</p></div>
                        <div><p class="text-gray-500 text-xs">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß</p><p class="font-medium">${ep.duration || }</p></div>
                        <div><p class="text-gray-500 text-xs">‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á</p><p class="font-medium"><i class="fa-solid fa-book-open mr-1"></i> ${ep.source || ep.mangaRef || }</p></div>
                    </div>
                </div>

                <!-- 2 Column Content -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-0 lg:gap-8 p-6 md:p-8">
                      
                    <!-- Left Column: Case Details -->
                    <div class="lg:col-span-2 space-y-8">
                          
                        <!-- Structure -->
                        <section>
                            <h3 class="text-lg font-bold text-conan-blue mb-4 border-b pb-2"><i class="fa-solid fa-gavel mr-2"></i>‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏î‡∏µ</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-slate-50 p-4 rounded-lg border border-slate-100">
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-500">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</span>
                                        <span class="bg-red-100 text-red-800 text-xs font-bold px-2 py-1 rounded">${ep.caseType || }</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-500">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞</span>
                                        <span class="text-sm font-medium">${ep.caseSubType || }</span>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-500">‡πÅ‡∏£‡∏á‡∏à‡∏π‡∏á‡πÉ‡∏à</span>
                                        <span class="text-sm font-medium text-right w-1/2 truncate">${ep.motive || }</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-500">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô</span>
                                        <div class="flex text-yellow-400 text-xs">${stars}</div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Spoiler Section -->
                        <section class="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-300 relative spoiler-container" id="spoilerBox">
                            <div class="bg-slate-100 p-4 border-b border-slate-300 flex justify-between items-center">
                                <h3 class="text-lg font-bold text-slate-700"><i class="fa-solid fa-lightbulb mr-2 text-yellow-500"></i>‡∏Å‡∏≤‡∏£‡πÑ‡∏Ç‡∏Ñ‡∏î‡∏µ & ‡∏ö‡∏ó‡∏™‡∏£‡∏∏‡∏õ</h3>
                                <button onclick="toggleSpoiler()" class="text-xs bg-slate-800 text-white px-3 py-1 rounded hover:bg-slate-700 transition">
                                    <i class="fa-solid fa-eye mr-1"></i> ‡πÄ‡∏â‡∏•‡∏¢
                                </button>
                            </div>
                              
                            <div class="p-6 relative min-h-[200px]">
                                <div class="spoiler-overlay" onclick="toggleSpoiler()">
                                    <div class="text-center">
                                        <i class="fa-solid fa-triangle-exclamation text-4xl mb-2 text-red-500"></i>
                                        <p>‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏â‡∏•‡∏¢‡∏Ñ‡∏î‡∏µ</p>
                                    </div>
                                </div>
                                  
                                <div class="spoiler-content space-y-6">
                                    <div>
                                        <h4 class="font-bold text-conan-blue text-sm mb-2">‡πÄ‡∏ö‡∏≤‡∏∞‡πÅ‡∏™‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Key Clues)</h4>
                                        <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 ml-2">
                                            ${(ep.clues && Array.isArray(ep.clues)) ? ep.clues.map(c => `<li>${c}</li>`).join('') : '<li>-</li>'}
                                        </ul>
                                    </div>

                                    <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100">
                                        <h4 class="font-bold text-yellow-800 text-sm mb-2"><i class="fa-solid fa-wand-magic-sparkles mr-1"></i> ‡∏Å‡∏•‡∏≠‡∏∏‡∏ö‡∏≤‡∏¢ (Trick)</h4>
                                        <p class="text-sm text-gray-700 leading-relaxed">${ep.trick || }</p>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <h4 class="font-bold text-red-700 text-sm mb-1">‡∏ú‡∏π‡πâ‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ú‡∏¥‡∏î (Culprit)</h4>
                                            <p class="text-sm font-medium">${ep.culprit || }</p>
                                        </div>
                                        <div>
                                            <h4 class="font-bold text-slate-700 text-sm mb-1">‡∏à‡∏∏‡∏î‡∏û‡∏•‡∏≤‡∏î</h4>
                                            <p class="text-sm text-gray-600">${ep.mistake || }</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Plot Relevance -->
                        <section class="bg-slate-800 text-white rounded-xl shadow-lg p-6 relative overflow-hidden">
                            <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fa-solid fa-user-secret text-9xl"></i></div>
                            <h3 class="text-lg font-bold mb-4 relative z-10"><i class="fa-solid fa-link mr-2"></i>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å</h3>
                            <p class="text-sm text-slate-300 relative z-10 leading-relaxed mb-4">${ep.mainPlot || }</p>
                        </section>
                    </div>

                    <!-- Right Column: Sidebar -->
                    <div class="space-y-6">
                        <!-- Location -->
                        <section class="bg-white rounded-xl shadow-sm p-6 border border-slate-200">
                            <h3 class="text-md font-bold text-conan-blue mb-3 border-b pb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà & ‡πÄ‡∏ß‡∏•‡∏≤</h3>
                            <ul class="space-y-3">
                                <li class="flex items-start gap-3">
                                    <i class="fa-solid fa-map-location-dot text-gray-400 mt-1"></i>
                                    <div><p class="text-xs text-gray-500">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</p><p class="text-sm font-medium">${ep.location || }</p></div>
                                </li>
                                <li class="flex items-start gap-3">
                                    <i class="fa-solid fa-location-crosshairs text-gray-400 mt-1"></i>
                                    <div><p class="text-xs text-gray-500">‡∏à‡∏∏‡∏î‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏</p><p class="text-sm font-medium">${ep.scene || }</p></div>
                                </li>
                                 <li class="flex items-start gap-3">
                                    <i class="fa-regular fa-clock text-gray-400 mt-1"></i>
                                    <div><p class="text-xs text-gray-500">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</p><p class="text-sm font-medium">${ep.time || }</p></div>
                                </li>
                            </ul>
                        </section>

                        <!-- Characters -->
                        <section class="bg-white rounded-xl shadow-sm p-6 border border-slate-200">
                            <h3 class="text-md font-bold text-conan-blue mb-4 border-b pb-2">‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£</h3>
                              
                            <div class="mb-4">
                                <p class="text-xs font-bold text-gray-400 uppercase mb-2">‡πÄ‡∏´‡∏¢‡∏∑‡πà‡∏≠ (Victim)</p>
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-xs font-bold">V</div>
                                    <span class="text-sm">${ep.victim || }</span>
                                </div>
                            </div>

                            <div>
                                <p class="text-xs font-bold text-gray-400 uppercase mb-2">‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏´‡∏•‡∏±‡∏Å</p>
                                <div class="flex flex-wrap gap-1">
                                     ${renderList(ep.keyCharacters)}
                                </div>
                            </div>
                        </section>

                        <!-- Trivia -->
                        <section class="bg-blue-50 rounded-xl shadow-sm p-6 border border-blue-100">
                            <h3 class="text-md font-bold text-conan-blue mb-2"><i class="fa-solid fa-circle-info mr-2"></i>‡πÄ‡∏Å‡∏£‡πá‡∏î & ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡∏¥‡∏°</h3>
                            <p class="text-xs text-gray-600 leading-relaxed">${ep.trivia || }</p>
                        </section>
                    </div>
                </div>
                  
                <div class="bg-slate-100 p-4 text-center text-xs text-gray-500 brick-pattern">
                    ConanDB Season 1 - Episode ${ep.id}
                </div>
            </div>
        `;

        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Close Modal
    function closeModal() {
        modal.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Toggle Spoiler
    window.toggleSpoiler = function() {
        const container = document.getElementById('spoilerBox');
        container.classList.toggle('spoiler-active');
    }

    // Close on outside click
    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });

</script>

</body>
</html>